webpackJsonp([1],{"+C5c":function(e,t){},"/qpt":function(e,t){},"0PGB":function(e,t,a){e.exports=a.p+"static/img/radar_icon.3d0bebe.png"},"1ARv":function(e,t){},"99RW":function(e,t,a){e.exports=a.p+"static/img/title.403f48d.png"},Db7S:function(e,t){},Didw:function(e,t,a){e.exports=a.p+"static/img/login.de334db.jpg"},HbSC:function(e,t){},"L+oC":function(e,t){},LLT8:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App"},l,!1,function(e){a("bwxc")},null,null).exports,n=a("mtWM"),o=a("zL8q"),c=a.n(o),r=(a("tvR6"),a("XLwt")),d=a("/ocq"),p={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:"app"}},[this._v("\n  Hello World!\n")])},staticRenderFns:[]};var h=a("VU/8")({name:"AppIndex"},p,!1,function(e){a("LLT8")},"data-v-5cdcf72b",null).exports,v={name:"Login",data:function(){return{backgroundImg:a("Didw"),titleImg:a("99RW"),loginForm:{username:"",password:""},responseResult:[]}},methods:{login:function(){var e=this.$route.query.redirect;this.$router.replace({path:"/"===e||void 0===e?"/Main":e})}}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrapper"},[t("div",{staticClass:"background"},[t("img",{attrs:{src:this.backgroundImg,width:"100%",height:"100%",alt:""}})]),this._v(" "),t("div",{staticClass:"content"},[t("img",{staticClass:"title-img",attrs:{src:this.titleImg,alt:""}}),this._v(" "),t("div",{staticClass:"entry"},[t("el-button",{staticClass:"entry-btn",attrs:{round:""},on:{click:this.login}},[this._v("进入系统")])],1)])])},staticRenderFns:[]};var m=a("VU/8")(v,u,!1,function(e){a("lwog")},null,null).exports,g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{attrs:{router:"",mode:"vertical","default-active":"/main","text-color":"black","background-color":""}},[a("el-menu-item",{key:1,attrs:{index:"/main"}},[a("i",{staticClass:"el-icon-s-home"}),e._v(" "),a("span",[e._v("首页")])]),e._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{staticClass:"item-entry",slot:"title"},[a("i",{staticClass:"el-icon-s-data"}),e._v(" "),a("span",[e._v("数据展示")])]),e._v(" "),a("el-menu-item",{attrs:{index:"OriginDataView"}},[e._v("探空资料")]),e._v(" "),a("el-menu-item",{attrs:{index:"AnalysisDataView"}},[e._v("再分析资料")])],2),e._v(" "),a("el-submenu",{key:3,attrs:{index:"/index"}},[a("template",{staticClass:"item-entry",slot:"title"},[a("i",{staticClass:"el-icon-data-line"}),e._v(" "),a("span",[e._v("大气波导")])]),e._v(" "),a("el-menu-item",{attrs:{index:"DuctCalView"}},[e._v("波导计算")]),e._v(" "),a("el-menu-item",{attrs:{index:"DuctView"}},[e._v("波导展示")]),e._v(" "),a("el-menu-item",{attrs:{index:"DuctPredictView"}},[e._v("波导预测")])],2),e._v(" "),a("el-submenu",{key:4,attrs:{index:"/radar"}},[a("template",{staticClass:"item-entry",slot:"title"},[a("i",{staticClass:"el-icon-stopwatch"}),e._v(" "),a("span",[e._v("波导模拟")])]),e._v(" "),a("el-menu-item",{attrs:{index:"LossView"}},[e._v("损耗及盲区检测")]),e._v(" "),a("el-menu-item",{attrs:{index:"LossP"}},[e._v("虚警率计算")])],2)],1)},staticRenderFns:[]};var _={name:"Home",components:{NavMenu:a("VU/8")({name:"NavMenu",data:function(){return{navList:[{name:"/main",navItem:"首页"},{name:"/data-view",navItem:"数据展示"},{name:"/index",navItem:"波导预测"},{name:"/admin",navItem:"传输损耗"}]}}},g,!1,function(e){a("L+oC")},"data-v-a84d8a74",null).exports},data:function(){return{iconImg:a("0PGB")}}},f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("el-container",{attrs:{id:"app"}},[t("el-header",{staticClass:"header-view"},[t("div",{staticStyle:{float:"left",left:"2%"}},[t("img",{staticStyle:{"padding-top":"5px","padding-right":"6px",height:"40px",width:"40px"},attrs:{src:this.iconImg,alt:""}}),this._v(" "),t("span",{staticStyle:{position:"absolute","line-height":"55px","font-size":"23px","font-weight":"bold",color:"white"}},[this._v("\n        短临预测蒸发波导系统\n      ")])])]),this._v(" "),t("el-container",[t("el-aside",{attrs:{width:"200px"}},[t("nav-menu")],1),this._v(" "),t("el-main",[t("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")(_,f,!1,function(e){a("HbSC")},"data-v-4b971fe6",null).exports,x={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-menu",{staticClass:"categories",attrs:{"default-active":"0","active-text-color":"red"},on:{select:this.handleSelect}},[t("el-menu-item",{attrs:{index:"0"}},[t("i",{staticClass:"el-icon-menu"}),this._v(" "),t("span",{attrs:{slot:"title"},slot:"title"},[this._v("全部")])]),this._v(" "),t("el-menu-item",{attrs:{index:"1"}},[t("i",{staticClass:"el-icon-menu"}),this._v(" "),t("span",{attrs:{slot:"title"},slot:"title"},[this._v("文学")])])],1)},staticRenderFns:[]};var b=a("VU/8")({name:"SideMenu",data:function(){return{cid:""}},methods:{handleSelect:function(e,t){this.cid=e,this.$emit("indexSelect")}}},x,!1,function(e){a("NKJ+")},"data-v-6b43ed31",null).exports,y={name:"AnalysisDataView",components:{SideMenu:b},data:function(){var e=this;return{nameMapping:{},info:{},typeOptions:[],typeSelected:"",sourceOptions:[],sourceSelected:"",displayModes:["按天显示","按时间段显示"],displayModeSelected:"按天显示",singleDateSelect:"",dateSelectPlaceHolder:"请先选择数据来源和类型",dateSelectReadOnly:!0,dateFrom:"",dateTo:"",dateRangeSelected:"",dateOption:{disabledDate:function(t){var a=e;return t>=a.dateTo||t<=a.dateFrom}},singleLatSelected:0,singleLngSelected:0,latSelected:[-45,45],lngSelected:[-90,90],levelOptions:[],levelShownTypes:[],levelSelected:"",levelShown:!1,resultShown:!1,loading:!1,heatmapShown:!1,lineChartShown:!1,lineChartExist:!1,heatMapExist:!1}},mounted:function(){this.initEntries()},methods:{initEntries:function(){var e=this;this.$axios.get("data/analysis/init").then(function(t){if(t&&200===t.status){var a=t.data.mapping_eng,s=t.data.mapping_cn;e.typeOptions=[];for(var l=0;l<s.length;++l)e.nameMapping[a[l]]=s[l];e.levelOptions=[];for(var i=t.data.level.reverse(),n=0;n<i.length;++n)e.levelOptions.push({value:i[n],label:i[n],key:i[n]});e.levelShownTypes=t.data.need_show_level;for(var o=t.data.data,c=0;c<o.length;c++){var r=o[c];e.info[r.source]=r,e.sourceOptions.push({value:r.source,label:r.source,key:r.source})}}})},typeSelectedChangeEvent:function(e){var t=this.sourceSelected,a=this.info[t][e];this.dateFrom=new Date(a.date_from).getTime(),this.dateTo=new Date(a.date_to).getTime(),this.singleDateSelectPlaceHolder="请选择日期",this.dateSelectReadOnly=!1,this.singleDateSelect="",this.dateRangeSelected="",this.levelShown=-1!==this.levelShownTypes.indexOf(e)},sourceSelectedChangeEvent:function(e){var t=this.info[e].types;this.typeOptions=[],this.singleDateSelectPlaceHolder="请先选择数据来源和类型",this.singleDateSelect="",this.dateRangeSelected="",this.typeSelected="",this.dateFrom="",this.dateTo="",this.dateSelectReadOnly=!0,this.levelShown=!1;for(var a=0;a<t.length;++a)this.typeOptions.push({value:t[a],label:this.nameMapping[t[a]],key:t[a]})},singleDateSelectEvent:function(e){},onRangeSelectBtnChangeListener:function(){this.dateRangeSelected="",this.singleDateSelect=""},searchForSingleDate:function(){var e=this,t=this,a=!0;if(""!==t.typeSelected&&""!==t.sourceSelected||(a=!1),"按天显示"===t.displayModeSelected&&""===t.singleDateSelect&&(a=!1),"按时间段显示"===t.displayModeSelected&&""===t.dateRangeSelected&&(a=!1),t.levelShown&&""===t.levelSelected&&(a=!1),a){t.resultShown=!0,t.loading=!0;var s="",l={};console.log(t.lng_range),"按时间段显示"===t.displayModeSelected?(s="data/analysis/fetch-date-range",l={lat:t.singleLatSelected,lng:t.singleLngSelected,type:t.typeSelected,source:t.sourceSelected,timestamp:t.dateRangeSelected,level:t.levelSelected}):(s="data/analysis/fetch-single-date",l={lat_range:t.latSelected,lng_range:t.lngSelected,type:t.typeSelected,source:t.sourceSelected,timestamp:t.singleDateSelect,level:t.levelSelected}),console.log(l),this.$axios.post(s,l).then(function(a){console.log(a),"按时间段显示"===t.displayModeSelected?(t.heatmapShown=!1,t.lineChartShown=!0,t.clearAllDrawings(),e.$nextTick(function(){e.drawRangeLineChart(a),t.lineChartExist=!0})):(t.heatmapShown=!0,t.lineChartShown=!1,t.clearAllDrawings(),e.$nextTick(function(){e.drawSingleDayHeatMap(a),t.heatMapExist=!0})),t.loading=!1}).catch(function(a){e.$message({showClose:!0,message:"后端出错",type:"error"}),t.resultShown=!0,t.loading=!1})}else this.$message({showClose:!0,message:"条件未输入完全",type:"error"})},clearAllDrawings:function(){this.heatMapExist&&(this.$echarts.init(document.getElementById("heatmapChart")).clear(),this.heatMapExist=!1);this.lineChartExist&&(this.$echarts.init(document.getElementById("lineChart")).clear(),this.lineChartExist=!1)},drawSingleDayHeatMap:function(e){var t=e.data.lat,a=e.data.lng,s=e.data.data,l=e.data.max_value,i=e.data.min_value,n=e.data.title,o=this.$echarts.init(document.getElementById("heatmapChart")),c=s.map(function(e){return[e[1],e[0],e[2]||"-"]});console.log(c),o.setOption({title:{text:n,left:"center",top:"4%"},tooltip:{position:"top",axisPointer:{type:"shadow"},formatter:function(e){var s=e.data;return"经度: "+a[s[0]]+"<br/>纬度: "+t[s[1]]+"<br/>值: "+s[2]}},grid:{height:"50%",top:"10%"},xAxis:{name:"经度",type:"category",data:a,splitArea:{show:!0}},yAxis:{name:"纬度",type:"category",data:t,splitArea:{show:!0}},visualMap:{min:i,max:l,calculable:!0,orient:"horizontal",left:"center",bottom:"25%",precision:5,itemWidth:"20",itemHeight:o.getWidth()-400,inRange:{color:["#438cf8","#f8f3a3","#ff0000"]}},series:[{type:"heatmap",data:c,label:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],toolbox:{show:!0,left:"4%",top:"2%",feature:{saveAsImage:{show:!0,excludeComponents:["toolbox"],pixelRatio:2},dataZoom:{show:!0}}}})},drawRangeLineChart:function(e){var t=e.data.data,a=e.data.time_axis,s=e.data.max_value,l=e.data.min_value,i=e.data.title;this.$echarts.init(document.getElementById("lineChart")).setOption({title:{text:i,left:"center",top:"4%"},xAxis:{type:"category",name:"经度",data:a},yAxis:{type:"value",name:"纬度",min:l,max:s},series:[{data:t,type:"line",symbolSize:10,symbol:"circle",smooth:!0,lineStyle:{width:3,shadowColor:"rgba(0,0,0,0.3)",shadowBlur:10,shadowOffsetY:8}}],tooltip:{position:"top"},toolbox:{show:!0,left:"4%",top:"2%",feature:{saveAsImage:{show:!0,excludeComponents:["toolbox"],pixelRatio:2},dataZoom:{show:!0}}}})},dummy:function(){return null}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"wrapper"}},[a("el-container",{staticClass:"container",staticStyle:{height:"100%"}},[a("el-header",{staticClass:"navi_header"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{staticClass:"breadcrumb-wrapper child",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("数据展示")]),e._v(" "),a("el-breadcrumb-item",[e._v("再分析资料")])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"title-row"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title-text"},[e._v("再分析资料可视化展示")])])],1)],1),e._v(" "),a("el-main",[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("数据来源")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.sourceSelectedChangeEvent},model:{value:e.sourceSelected,callback:function(t){e.sourceSelected=t},expression:"sourceSelected"}},e._l(e.sourceOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("数据来源即再分析资料的采集方")])],2),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("数据类型")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择","no-data-text":"请先选择数据来源"},on:{change:e.typeSelectedChangeEvent},model:{value:e.typeSelected,callback:function(t){e.typeSelected=t},expression:"typeSelected"}},e._l(e.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.value))])])}),1)],e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("数据类型即再分析资料的类别，例如海表温度、风速等")])],2),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.levelShown,expression:"levelShown"}],staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("标准大气 level ")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择","no-data-text":"请先选择数据来源"},on:{change:e.typeSelectedChangeEvent},model:{value:e.levelSelected,callback:function(t){e.levelSelected=t},expression:"levelSelected"}},e._l(e.levelOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("Major level type indicator，诸如比湿度、U风分量、V风分量等数据需要选择展示的层值")])],2),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("显示方式")]),e._v(" "),a("el-radio-group",{attrs:{size:"medium"},on:{change:e.onRangeSelectBtnChangeListener},model:{value:e.displayModeSelected,callback:function(t){e.displayModeSelected=t},expression:"displayModeSelected"}},e._l(e.displayModes,function(e){return a("el-radio-button",{key:e,attrs:{label:e}})}),1),e._v(" "),a("span",{staticClass:"search-text"},[e._v("日期选择")]),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"按天显示"===e.displayModeSelected,expression:"displayModeSelected === '按天显示'"}],class:{"single-date-select":!0},attrs:{type:"date",placeholder:e.dateSelectPlaceHolder,readonly:e.dateSelectReadOnly,disabled:e.dateSelectReadOnly,size:"small","picker-options":e.dateOption,"default-value":e.dateFrom,"value-format":"timestamp"},on:{change:e.singleDateSelectEvent},model:{value:e.singleDateSelect,callback:function(t){e.singleDateSelect=t},expression:"singleDateSelect"}}),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"按时间段显示"===e.displayModeSelected,expression:"displayModeSelected === '按时间段显示'"}],attrs:{type:"daterange","picker-options":e.dateOption,readonly:e.dateSelectReadOnly,disabled:e.dateSelectReadOnly,"default-value":e.dateFrom,"value-format":"timestamp",size:"small","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRangeSelected,callback:function(t){e.dateRangeSelected=t},expression:"dateRangeSelected"}})],1),e._v(" "),a("div",{staticClass:"search-row",staticStyle:{display:"flex","margin-top":"8px"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:"按天显示"===e.displayModeSelected,expression:"displayModeSelected === '按天显示'"}],staticClass:"search-text"},[e._v("纬度区间")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"按时间段显示"===e.displayModeSelected,expression:"displayModeSelected === '按时间段显示'"}],staticClass:"search-text"},[e._v("纬度选择")]),e._v(" "),a("span",{staticClass:"latlng-hint-text"},[e._v("南纬90°")]),e._v(" "),[a("div",{directives:[{name:"show",rawName:"v-show",value:"按天显示"===e.displayModeSelected,expression:"displayModeSelected === '按天显示'"}],staticClass:"latlng_slider"},[a("el-slider",{attrs:{range:"",max:90,min:-90},model:{value:e.latSelected,callback:function(t){e.latSelected=t},expression:"latSelected"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"按时间段显示"===e.displayModeSelected,expression:"displayModeSelected === '按时间段显示'"}],staticClass:"latlng_slider"},[a("el-slider",{attrs:{max:90,min:-90},model:{value:e.singleLatSelected,callback:function(t){e.singleLatSelected=t},expression:"singleLatSelected"}})],1)],e._v(" "),a("span",{staticClass:"latlng-hint-text"},[e._v("北纬90°")])],2),e._v(" "),a("div",{staticClass:"search-row",staticStyle:{display:"flex","margin-top":"8px"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:"按天显示"===e.displayModeSelected,expression:"displayModeSelected === '按天显示'"}],staticClass:"search-text"},[e._v("经度区间")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"按时间段显示"===e.displayModeSelected,expression:"displayModeSelected === '按时间段显示'"}],staticClass:"search-text"},[e._v("经度选择")]),e._v(" "),a("span",{staticClass:"latlng-hint-text"},[e._v("西经180°")]),e._v(" "),[a("div",{directives:[{name:"show",rawName:"v-show",value:"按天显示"===e.displayModeSelected,expression:"displayModeSelected === '按天显示'"}],staticClass:"latlng_slider"},[a("el-slider",{attrs:{range:"",max:180,min:-180},model:{value:e.lngSelected,callback:function(t){e.lngSelected=t},expression:"lngSelected"}})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"按时间段显示"===e.displayModeSelected,expression:"displayModeSelected === '按时间段显示'"}],staticClass:"latlng_slider single"},[a("el-slider",{attrs:{max:180,min:-180},model:{value:e.singleLngSelected,callback:function(t){e.singleLngSelected=t},expression:"singleLngSelected"}})],1)],e._v(" "),a("span",{staticClass:"latlng-hint-text"},[e._v("东经180°")])],2),e._v(" "),a("div",{staticClass:"search-row"},[a("el-button",{staticClass:"search-btn",attrs:{round:""},on:{click:e.searchForSingleDate}},[e._v("搜索并显示")])],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.resultShown,expression:"resultShown"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"display-box"},[e.heatmapShown?a("div",{staticStyle:{width:"1200px",height:"800px",overflow:"auto",left:"50px"},attrs:{id:"heatmapChart"}}):e._e(),e._v(" "),e.lineChartShown?a("div",{staticStyle:{width:"1200px",height:"800px",overflow:"auto",left:"50px"},attrs:{id:"lineChart"}}):e._e()])])],1)],1)},staticRenderFns:[]};var C=a("VU/8")(y,w,!1,function(e){a("/qpt")},"data-v-64524166",null).exports,D=a("ifoU"),k=a.n(D),M={name:"OriginDataView",components:{SideMenu:b},data:function(){var e=this;return{station_ids:["加载中"],locations:["加载中"],typeSelected:"",lats:[],lngs:[],idxSelected:"加载中",displayModes:["按天显示","按时间段显示"],displayModeSelected:"按天显示",dateSelectPlaceHolder:"加载中",dateSelectReadOnly:!0,dateFrom:"",dateTo:"",singleDateSelect:"",dateRangeSelected:"",dateOption:{disabledDate:function(t){var a=e;return t>a.dateTo||t<a.dateFrom}},resultShown:!1,loading:!1,tableData:[],colNameMap:new k.a,tableHeader:[],levelIdx:1,stackedLineChartExist:!1,singleDateDisplayModes:["全部数据","单一数据垂直分布"],singleDateDisplayModeSelected:"全部数据",singleDateDisplayTypes:[],singleDateDisplayTypeSelected:"",singleDateColNameMap:new k.a,singleDayLineChartExist:!1,stackedLineChartShown:!1,singleDayLineChartShown:!1}},mounted:function(){this.initEntries()},methods:{initEntries:function(){var e=this;this.$axios.get("data/origin/init").then(function(t){t&&200===t.status&&(e.station_ids=t.data.ids,e.lats=t.data.lats,e.lngs=t.data.lngs,e.locations=t.data.locations,e.idxSelected=0,e.dateSelectReadOnly=!1,e.dateFrom=new Date(t.data.date_from).getTime(),e.dateTo=new Date(t.data.date_to).getTime(),e.dateSelectPlaceHolder="请选择")})},stationSelectedChangeEvent:function(e){},locationSelectedChangeEvent:function(e){},onRangeSelectBtnChangeListener:function(){var e=this,t=this;if(t.dateRangeSelected="",t.singleDateSelect="",t.clearAllDrawings(),0===t.colNameMap.size){this.$axios.post("data/origin/header",{}).then(function(e){t.colNameMap=e.data.map}).catch(function(a){t.loading=!1,console.log(a),e.$message({showClose:!0,message:"获取可选数据类型失败",type:"error"})})}},onSingleDateDisplayModeChangeListener:function(){var e=this,t=this;if(t.clearAllDrawings(),0===t.singleDateColNameMap.size){this.$axios.post("data/origin/single-day-entry",{}).then(function(e){t.singleDateColNameMap=e.data.map}).catch(function(a){t.loading=!1,console.log(a),e.$message({showClose:!0,message:"获取单一数据类型失败",type:"error"})})}},searchForData:function(){var e=this,t=this,a=!0;if("加载中"===t.idxSelected&&(a=!1),"按天显示"===t.displayModeSelected&&""===t.singleDateSelect&&(a=!1),"按时间段显示"!==t.displayModeSelected||""!==t.dateRangeSelected&&""!==t.typeSelected||(a=!1),"单一数据垂直分布"===t.singleDateDisplayModeSelected&&""===t.singleDateDisplayTypeSelected&&(a=!1),a){var s="",l={};t.loading=!0,t.resultShown=!0,"按天显示"===t.displayModeSelected?"单一数据垂直分布"===t.singleDateDisplayModeSelected?(s="data/origin/fetch-single-daily",l={id:t.station_ids[t.idxSelected],date:t.singleDateSelect,type:t.singleDateDisplayTypeSelected}):(s="data/origin/fetch-single",l={id:t.station_ids[t.idxSelected],date:t.singleDateSelect}):"按时间段显示"===t.displayModeSelected&&(s="data/origin/fetch-range",l={id:t.station_ids[t.idxSelected],date:t.dateRangeSelected,type:t.typeSelected,level:t.levelIdx}),this.$axios.post(s,l).then(function(a){if("按时间段显示"===t.displayModeSelected)t.stackedLineChartShown=!0,t.singleDayLineChartShown=!1,e.$nextTick(function(){e.drawRangeLineChart(a),t.stackedLineChartExist=!0});else{var s=a.data;"单一数据垂直分布"===t.singleDateDisplayModeSelected?(t.stackedLineChartShown=!1,t.singleDayLineChartShown=!0,e.$nextTick(function(){e.drawSingleDayLineChart(a),t.singleDayLineChartExist=!0})):-1===s.code?e.$notify({title:"结果出错",message:a.data.msg,type:"warning"}):(e.$notify({title:"查询成功",message:"结果已整理并返回",type:"success"}),t.tableHeader=s.cols_eng,t.colNameMap=s.map,t.tableData=s.data,console.log(t.tableData))}t.loading=!1}).catch(function(a){t.loading=!1,console.log(a),e.$message({showClose:!0,message:"后端出错",type:"error"})})}else this.$message({showClose:!0,message:"条件未输入完全",type:"error"})},drawRangeLineChart:function(e){var t=e.data.types,a=e.data.title,s=e.data.x,l=e.data.series;console.log(l),console.log(t),this.$echarts.init(document.getElementById("stackedLineChart")).setOption({title:{text:a,left:"center",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"8%",bottom:"5%",data:t},grid:{height:"60%",left:"3%",right:"4%",top:"17%",containLabel:!0},toolbox:{show:!0,left:"4%",top:"2%",feature:{saveAsImage:{show:!0,excludeComponents:["toolbox"],pixelRatio:2},dataZoom:{show:!0}}},xAxis:{type:"category",boundaryGap:!1,data:s},yAxis:{type:"value"},series:l})},drawSingleDayLineChart:function(e){var t=e.data.values,a=e.data.heights,s=e.data.title,l=e.data.unit,i=e.data.cn_desp,n=this.$echarts.init(document.getElementById("singleDayLineChart"));console.log(a),console.log(t),n.setOption({title:{text:s,left:"center",top:"5%"},tooltip:{trigger:"axis",formatter:i+"<br/>{b}m : {c}"+l},toolbox:{show:!0,left:"4%",top:"2%",feature:{saveAsImage:{show:!0,excludeComponents:["toolbox"],pixelRatio:2},dataZoom:{show:!0}}},grid:{height:"80%",top:"10%",containLabel:!0},xAxis:{type:"value",axisLabel:{formatter:"{value} "+l}},yAxis:{type:"category",axisLine:{onZero:!1},axisLabel:{formatter:"{value} m"},boundaryGap:!1,data:a},series:[{name:s,type:"line",symbolSize:10,symbol:"circle",smooth:!0,lineStyle:{width:3,shadowColor:"rgba(0,0,0,0.3)",shadowBlur:10,shadowOffsetY:8},data:t}]})},clearAllDrawings:function(){this.stackedLineChartExist&&this.$echarts.init(document.getElementById("stackedLineChart")).clear();this.singleDayLineChartExist&&this.$echarts.init(document.getElementById("singleDayLineChart")).clear();this.stackedLineChartExist=!1,this.singleDayLineChartExist=!1}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"wrapper"}},[a("el-container",{staticClass:"container",staticStyle:{height:"100%"}},[a("el-header",{staticClass:"navi_header"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{staticClass:"breadcrumb-wrapper child",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("数据展示")]),e._v(" "),a("el-breadcrumb-item",[e._v("探空资料")])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"title-row"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title-text"},[e._v("探空资料可视化展示")])])],1)],1),e._v(" "),a("el-main",[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("站点选择")]),e._v(" "),a("span",{staticClass:"search-text"},[e._v("编号")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择站点编号","no-data-text":"",filterable:"",disabled:"加载中"===e.idxSelected},on:{change:e.stationSelectedChangeEvent},model:{value:e.idxSelected,callback:function(t){e.idxSelected=t},expression:"idxSelected"}},e._l(e.station_ids,function(e,t){return a("el-option",{key:t,staticStyle:{width:"200px"},attrs:{label:e,value:t}})}),1)],e._v(" "),a("span",{staticClass:"search-text"},[e._v("|")]),e._v(" "),a("span",{staticClass:"search-text"},[e._v("位置")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择地理位置","no-data-text":"",filterable:"",disabled:"加载中"===e.idxSelected},on:{change:e.locationSelectedChangeEvent},model:{value:e.idxSelected,callback:function(t){e.idxSelected=t},expression:"idxSelected"}},e._l(e.locations,function(e,t){return a("el-option",{key:t,staticStyle:{width:"200px"},attrs:{label:e,value:t}})}),1)],e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("站点编号和地理位置选其一即可")])],2),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("显示方式")]),e._v(" "),a("el-radio-group",{attrs:{size:"medium"},on:{change:e.onRangeSelectBtnChangeListener},model:{value:e.displayModeSelected,callback:function(t){e.displayModeSelected=t},expression:"displayModeSelected"}},e._l(e.displayModes,function(e){return a("el-radio-button",{key:e,attrs:{label:e}})}),1),e._v(" "),a("span",{staticClass:"search-text"},[e._v("日期选择")]),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"按天显示"===e.displayModeSelected,expression:"displayModeSelected === '按天显示'"}],class:{"single-date-select":!0},attrs:{type:"date",placeholder:e.dateSelectPlaceHolder,readonly:e.dateSelectReadOnly,disabled:e.dateSelectReadOnly,size:"small","picker-options":e.dateOption,"default-value":e.dateFrom,"value-format":"yyyy-MM-dd"},model:{value:e.singleDateSelect,callback:function(t){e.singleDateSelect=t},expression:"singleDateSelect"}}),e._v(" "),a("el-date-picker",{directives:[{name:"show",rawName:"v-show",value:"按时间段显示"===e.displayModeSelected,expression:"displayModeSelected === '按时间段显示'"}],attrs:{type:"daterange","picker-options":e.dateOption,readonly:e.dateSelectReadOnly,disabled:e.dateSelectReadOnly,"default-value":e.dateFrom,"value-format":"yyyy-MM-dd",size:"small","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRangeSelected,callback:function(t){e.dateRangeSelected=t},expression:"dateRangeSelected"}})],1),e._v(" "),"按天显示"===e.displayModeSelected?a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("显示类型")]),e._v(" "),a("el-radio-group",{attrs:{size:"medium"},on:{change:e.onSingleDateDisplayModeChangeListener},model:{value:e.singleDateDisplayModeSelected,callback:function(t){e.singleDateDisplayModeSelected=t},expression:"singleDateDisplayModeSelected"}},e._l(e.singleDateDisplayModes,function(e){return a("el-radio-button",{key:e,attrs:{label:e}})}),1),e._v(" "),"单一数据垂直分布"===e.singleDateDisplayModeSelected?a("span",{staticClass:"search-text"},[e._v("单一数据类型")]):e._e(),e._v(" "),"单一数据垂直分布"===e.singleDateDisplayModeSelected?a("el-select",{attrs:{placeholder:"请选择数据类型","no-data-text":"",filterable:"",disabled:"加载中"===e.idxSelected},model:{value:e.singleDateDisplayTypeSelected,callback:function(t){e.singleDateDisplayTypeSelected=t},expression:"singleDateDisplayTypeSelected"}},e._l(e.singleDateColNameMap,function(t){return a("el-option",{key:t.eng,staticStyle:{width:"200px"},attrs:{label:t.cn,value:t.eng}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.cn))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.eng))])])}),1):e._e(),e._v(" "),"单一数据垂直分布"===e.singleDateDisplayModeSelected?a("i",{staticClass:"el-icon-info select-icon"}):e._e(),e._v(" "),"单一数据垂直分布"===e.singleDateDisplayModeSelected?a("span",{staticClass:"hint-text"},[e._v("所选的单一数据类型将作为垂直廓线的x轴")]):e._e()],1):e._e(),e._v(" "),"按时间段显示"===e.displayModeSelected?a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("数据类型")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择数据类型",multiple:"","no-data-text":"",filterable:"",disabled:"加载中"===e.idxSelected},model:{value:e.typeSelected,callback:function(t){e.typeSelected=t},expression:"typeSelected"}},e._l(e.colNameMap,function(t){return a("el-option",{key:t.eng,staticStyle:{width:"200px"},attrs:{label:t.cn,value:t.eng}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.cn))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-right":"-30px"}},[e._v(e._s(t.eng))])])}),1),e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("类型选择得越多，数据展示会越杂乱，建议只选择部分需要展示的类型")])],1):e._e(),e._v(" "),"按时间段显示"===e.displayModeSelected?a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("探测点位")]),e._v(" "),[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:10,size:"median"},model:{value:e.levelIdx,callback:function(t){e.levelIdx=t},expression:"levelIdx"}})],e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("由于一天的探空资料在不同高度存在不同探测点，所以需选择要展示趋势的探测点位置")])],2):e._e(),e._v(" "),e.idxSelected>-1?a("div",{staticClass:"search-row"},[a("i",{staticClass:"el-icon-success",staticStyle:{"margin-left":"25px"}}),e._v(" "),"按天显示"===e.displayModeSelected?a("span",{staticClass:"select-text"},[e._v("\n              您选择的地点为 "+e._s(e.locations[e.idxSelected])+", 经度 "+e._s(e.lngs[e.idxSelected])+"°，纬度 "+e._s(e.lats[e.idxSelected])+"°。日期："+e._s(e.singleDateSelect)+"。\n            ")]):e._e(),e._v(" "),"按时间段显示"===e.displayModeSelected?a("span",{staticClass:"select-text"},[e._v("\n              您选择的地点为 "+e._s(e.locations[e.idxSelected])+", 经度 "+e._s(e.lngs[e.idxSelected])+"°，纬度 "+e._s(e.lats[e.idxSelected])+"°。\n              日期："+e._s(e.dateRangeSelected[0])+" ~ "+e._s(e.dateRangeSelected[1])+"。\n              数据类型："+e._s(e.typeSelected)+"。\n              探测点位："+e._s(e.levelIdx)+"。\n            ")]):e._e()]):e._e(),e._v(" "),a("div",{staticClass:"search-row"},[a("el-button",{staticClass:"search-btn",attrs:{round:""},on:{click:e.searchForData}},[e._v("搜索并显示")])],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.resultShown,expression:"resultShown"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"display-box"},["按天显示"===e.displayModeSelected&&"全部数据"===e.singleDateDisplayModeSelected?[a("el-table",{staticClass:"result-table",staticStyle:{width:"90%"},attrs:{stripe:"",data:e.tableData}},e._l(e.colNameMap,function(t){return a("el-table-column",{key:t.eng,attrs:{label:t.cn,property:t.eng,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row[t.column.property]))])]}}],null,!0)})}),1)]:e._e(),e._v(" "),e.stackedLineChartShown?a("div",{staticStyle:{width:"1200px",height:"800px",overflow:"auto",left:"50px"},attrs:{id:"stackedLineChart"}}):e._e(),e._v(" "),e.singleDayLineChartShown?a("div",{staticStyle:{width:"1200px",height:"800px",overflow:"auto",left:"50px"},attrs:{id:"singleDayLineChart"}}):e._e()],2)])],1)],1)},staticRenderFns:[]};var L=a("VU/8")(M,R,!1,function(e){a("1ARv")},"data-v-79fae6b8",null).exports,$={name:"DuctPredict",components:{},data:function(){var e=this;return{station_ids:["加载中"],locations:["加载中"],idxSelected:"加载中",lngs:[],lats:[],dateSelectReadOnly:!0,dateFrom:"",dateTo:"",dateSelectPlaceHolder:"请等待",predictModelSelected:"",predictModelOptions:[["支持向量回归","SVR"],["K近邻","KNN"],["决策树","DT"],["随机森林","RF"],["梯度提升回归树","GBRT"],["长短期记忆","LSTM(RNN)"],["门控循环单元","GRU(RNN)"]],psoRequire:!1,modelSelect:"nps",dateRangeSelected:"",dateOption:{disabledDate:function(t){var a=e;return t>=a.dateTo||t<=a.dateFrom}},predictLen:"未来48小时(2天)",predictLenOptions:["未来24小时(1天)","未来48小时(2天)","未来72小时(3天)","未来96小时(4天)","未来120小时(5天)","未来144小时(6天)","未来168小时(7天)","未来192小时(8天)","未来216小时(9天)","未来240小时(10天)","未来264小时(11天)","未来288小时(12天)","未来312小时(13天)","未来336小时(14天)","未来360小时(15天)","未来384小时(16天)","未来408小时(17天)","未来432小时(18天)","未来456小时(19天)","未来480小时(20天)"],dialogVisible:!1,epoch:50,windowSize:6,tableData:[]}},mounted:function(){this.initEntries()},methods:{initEntries:function(){var e=this;this.$axios.get("height/init_entry").then(function(t){t&&200===t.status&&(console.log(t),e.station_ids=t.data.ids,e.lats=t.data.lats,e.lngs=t.data.lngs,e.locations=t.data.locations,e.idxSelected=0,e.dateSelectReadOnly=!1,e.dateFrom=new Date(t.data.date_from).getTime(),e.dateTo=new Date(t.data.predict_date_to).getTime(),e.dateSelectPlaceHolder="请选择")})},datePickerChangeListener:function(e){var t=e[1]-e[0];(t/=1e3)<2592e3&&(this.$notify({title:"条件错误",message:"请选择一个月以上的训练数据，以达到更好的训练效果",type:"warning"}),this.dateRangeSelected="")},onPredictBtnClicked:function(){var e=this,t=this;if(""!==t.modelSelect&&""!==t.dateRangeSelected){var a={id:t.station_ids[t.idxSelected],date:t.dateRangeSelected,pso:t.psoRequire,predict_model:t.predictModelSelected,height_model:t.modelSelect,epoch:t.epoch,window:t.windowSize,output_len:t.predictLen},s=this.$loading({lock:!0,text:"模型训练中，请稍后……",spinner:"el-icon-loading",background:"rgba(0,0,0,0.5)"});this.$axios.post("predict/predict",a).then(function(a){var s=a.data.code;0===s?(e.$notify({title:"模型训练完毕",message:a.data.msg,type:"success"}),console.log(a.data.table_entry),t.tableData.unshift(a.data.table_entry)):-1===s&&e.$notify({title:"结果出错",message:a.data.msg,type:"warning"})}).catch(function(a){t.loading=!1,console.log(a),e.$notify({title:"无法计算",message:"后端出错",type:"error"})}),s.close()}else this.$notify({title:"条件未输入完全",message:"请填入所有查询条件后重试",type:"warning"})},resetEpoch:function(){var e=this.epoch;this.epoch=e.replace(/[^\d]/g,"").replace(/\./g,""),this.epoch=Number(this.epoch),this.epoch>1e3?this.epoch=1e3:this.epoch<20&&(this.epoch=20)},resetWindowSize:function(){var e=this.windowSize;this.windowSize=e.replace(/[^\d]/g,"").replace(/\./g,""),this.windowSize=Number(this.windowSize),this.windowSize>12?this.windowSize=12:this.windowSize<2&&(this.windowSize=2)}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"wrapper"}},[a("el-container",{staticClass:"container",staticStyle:{height:"100%"}},[a("el-header",{staticClass:"navi_header"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{staticClass:"breadcrumb-wrapper child",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("大气波导")]),e._v(" "),a("el-breadcrumb-item",[e._v("波导预测")])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"title-row"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title-text"},[e._v("大气波导预测模型训练及效果评估")])])],1),e._v(" "),a("el-row",{staticClass:"sub-title-row"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"sub-title-text"},[e._v("目前只针对数据缺值较少、探测点位较低的站点进行了波导预计算")])])],1)],1),e._v(" "),a("el-main",[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("站点选择")]),e._v(" "),a("span",{staticClass:"search-text"},[e._v("编号")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择站点编号","no-data-text":"",filterable:"",disabled:"加载中"===e.idxSelected},model:{value:e.idxSelected,callback:function(t){e.idxSelected=t},expression:"idxSelected"}},e._l(e.station_ids,function(e,t){return a("el-option",{key:t,staticStyle:{width:"200px"},attrs:{label:e,value:t}})}),1)],e._v(" "),a("span",{staticClass:"search-text"},[e._v("|")]),e._v(" "),a("span",{staticClass:"search-text"},[e._v("位置")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择地理位置","no-data-text":"",filterable:"",disabled:"加载中"===e.idxSelected},model:{value:e.idxSelected,callback:function(t){e.idxSelected=t},expression:"idxSelected"}},e._l(e.locations,function(e,t){return a("el-option",{key:t,staticStyle:{width:"200px"},attrs:{label:e,value:t}})}),1)],e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("站点编号和地理位置选其一即可")])],2),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("波导高度计算模型")]),e._v(" "),[a("el-radio",{attrs:{label:"nps"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("nps")]),e._v(" "),a("el-radio",{attrs:{label:"babin"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("byc")]),e._v(" "),a("el-radio",{attrs:{label:"pj"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("pj")]),e._v(" "),a("el-radio",{attrs:{label:"liuli"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("mgb")])],e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("波导预测的特征值即为所选波导高度计算模型的计算结果")])],2),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("预测模型")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.predictModelSelected,callback:function(t){e.predictModelSelected=t},expression:"predictModelSelected"}},e._l(e.predictModelOptions,function(t){return a("el-option",{key:t[1],attrs:{label:t[0],value:t[1]}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t[0]))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t[1]))])])}),1)],e._v(" "),a("span",{staticClass:"search-text"},[e._v("训练数据时间范围")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","picker-options":e.dateOption,"value-format":"timestamp",size:"small","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","default-value":e.dateFrom},on:{change:e.datePickerChangeListener},model:{value:e.dateRangeSelected,callback:function(t){e.dateRangeSelected=t},expression:"dateRangeSelected"}}),e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("训练时间需大于一个月")])],2),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("预测时间长度")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择预测时间长度","no-data-text":"",filterable:""},model:{value:e.predictLen,callback:function(t){e.predictLen=t},expression:"predictLen"}},e._l(e.predictLenOptions,function(e){return a("el-option",{key:e,staticStyle:{width:"200px"},attrs:{label:e,value:e}})}),1),e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("预测时间长度越长，效果越差，建议选择未来48小时(2天)")])],1),e._v(" "),a("div",{staticClass:"search-row"},[a("el-button",{staticClass:"search-btn",attrs:{round:""},on:{click:e.onPredictBtnClicked}},[e._v("训练模型")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{icon:"el-icon-setting",round:"",circle:""},on:{click:function(t){e.dialogVisible=!0}}})],1)]),e._v(" "),a("el-dialog",{attrs:{title:"额外设置",visible:e.dialogVisible,width:"50%",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"dialog-search-row"},[a("span",{staticClass:"search-text"},[e._v("粒子群调优")]),e._v(" "),a("el-switch",{attrs:{disabled:"LSTM(RNN)"===e.predictModelSelected||"GRU(RNN)"===e.predictModelSelected},model:{value:e.psoRequire,callback:function(t){e.psoRequire=t},expression:"psoRequire"}}),e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("若开启，则有额外的训练时间，请耐心等待")])],1),e._v(" "),a("div",{staticClass:"dialog-search-row"},[a("span",{staticClass:"search-text"},[e._v("训练轮次")]),e._v(" "),a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入内容"},on:{change:e.resetEpoch},model:{value:e.epoch,callback:function(t){e.epoch=t},expression:"epoch"}}),e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("仅对RNN方法生效，作为深度学习模型训练时的epoch")])],1),e._v(" "),a("div",{staticClass:"dialog-search-row"},[a("span",{staticClass:"search-text"},[e._v("训练窗口长度")]),e._v(" "),a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入内容"},on:{change:e.resetWindowSize},model:{value:e.windowSize,callback:function(t){e.windowSize=t},expression:"windowSize"}}),e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("决定使用前几个时间步去预测后续的时间步")])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"hint-text"},[e._v("所有设置在修改后即生效")])])]),e._v(" "),a("div",{staticClass:"display-box"},[a("el-row",{staticClass:"title-row",staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title-text",staticStyle:{"padding-left":"20px"}},[e._v("历史计算结果")])])],1),e._v(" "),[a("el-table",{staticClass:"result-table",staticStyle:{width:"95%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"date",label:"计算时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"station",label:"所选站点"}}),e._v(" "),a("el-table-column",{attrs:{prop:"height_model",label:"波导计算模型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"predict_model",label:"波导预测模型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pso",label:"粒子群调优"}}),e._v(" "),a("el-table-column",{attrs:{prop:"range",label:"训练数据时间范围"}}),e._v(" "),a("el-table-column",{attrs:{prop:"output_len",label:"预测时间长度"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mae",label:"MAE"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rmse",label:"RMSE"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mape",label:"MAPE(%)"}})],1)]],2)],1)],1)],1)},staticRenderFns:[]};var O=a("VU/8")($,E,!1,function(e){a("Vjdb")},"data-v-4a46e244",null).exports,H={name:"DuctCal",components:{},data:function(){return{temp:"",relh:"",speed:"",pressure:"",height:"",sst:"",modelSelect:"nps",tableData:[]}},mounted:function(){},methods:{onCalBtnClicked:function(){var e=this,t=this,a={temp:t.temp,relh:t.relh,speed:t.speed,pressure:t.pressure,height:t.height,sst:t.sst,model:t.modelSelect};this.$axios.post("height/cal",a).then(function(a){var s=a.data.code,l=a.data.res;0===s?(e.$notify({title:"计算完成",message:"成功计算得到波导高度为："+l,type:"success"}),t.tableData.unshift(a.data.table_entry)):-1===s&&e.$notify({title:"结果出错",message:a.data.hint_,type:"warning"})}).catch(function(a){t.loading=!1,console.log(a),e.$notify({title:"无法计算",message:"后端出错",type:"error"})})}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"wrapper"}},[a("el-container",{staticClass:"container",staticStyle:{height:"100%"}},[a("el-header",{staticClass:"navi_header"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{staticClass:"breadcrumb-wrapper child",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("大气波导")]),e._v(" "),a("el-breadcrumb-item",[e._v("波导计算")])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"title-row"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title-text"},[e._v("大气波导计算")])])],1)],1),e._v(" "),a("el-main",[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("气温    ")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入气温"},model:{value:e.temp,callback:function(t){e.temp=t},expression:"temp"}},[a("template",{slot:"append"},[e._v("°C")])],2),e._v(" "),a("span",{staticClass:"search-text"},[e._v("相对湿度")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入相对湿度"},model:{value:e.relh,callback:function(t){e.relh=t},expression:"relh"}},[a("template",{slot:"append"},[e._v("%")])],2)],1),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("风速    ")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入风速"},model:{value:e.speed,callback:function(t){e.speed=t},expression:"speed"}},[a("template",{slot:"append"},[e._v("m/s")])],2),e._v(" "),a("span",{staticClass:"search-text"},[e._v("压强    ")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入压强"},model:{value:e.pressure,callback:function(t){e.pressure=t},expression:"pressure"}},[a("template",{slot:"append"},[e._v("hPa")])],2)],1),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("测量高度")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入测量高度"},model:{value:e.height,callback:function(t){e.height=t},expression:"height"}},[a("template",{slot:"append"},[e._v("m")])],2),e._v(" "),a("span",{staticClass:"search-text"},[e._v("海面温度")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入海面温度"},model:{value:e.sst,callback:function(t){e.sst=t},expression:"sst"}},[a("template",{slot:"append"},[e._v("°C")])],2)],1),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("模型选择")]),e._v(" "),[a("el-radio",{attrs:{label:"nps"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("nps")]),e._v(" "),a("el-radio",{attrs:{label:"babin"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("byc")]),e._v(" "),a("el-radio",{attrs:{label:"pj"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("pj")]),e._v(" "),a("el-radio",{attrs:{label:"liuli"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("mgb")])]],2),e._v(" "),a("div",{staticClass:"search-row"},[a("el-button",{staticClass:"search-btn",attrs:{round:""},on:{click:e.onCalBtnClicked}},[e._v("计算")]),e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("计算结果不会保存")])],1)]),e._v(" "),a("div",{staticClass:"display-box"},[a("el-row",{staticClass:"title-row",staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title-text",staticStyle:{"padding-left":"20px"}},[e._v("历史计算结果")])])],1),e._v(" "),[a("el-table",{staticClass:"result-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"date",label:"计算时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"model",label:"模型选择"}}),e._v(" "),a("el-table-column",{attrs:{prop:"temp",label:"气温"}}),e._v(" "),a("el-table-column",{attrs:{prop:"relh",label:"相对湿度"}}),e._v(" "),a("el-table-column",{attrs:{prop:"speed",label:"风速"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pressure",label:"压强"}}),e._v(" "),a("el-table-column",{attrs:{prop:"height",label:"测量高度"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sst",label:"海面温度"}}),e._v(" "),a("el-table-column",{attrs:{prop:"res",label:"计算结果"}})],1)]],2)])],1)],1)},staticRenderFns:[]};var V=a("VU/8")(H,N,!1,function(e){a("+C5c")},"data-v-2cd06caa",null).exports,F={name:"DuctView",components:{},data:function(){var e=this;return{station_ids:["加载中"],locations:["加载中"],typeSelected:"",idxSelected:"加载中",lats:[],lngs:[],dateSelectReadOnly:!0,dateFrom:"",dateTo:"",dateRangeSelected:"",dateOption:{disabledDate:function(t){var a=e;return t>a.dateTo||t<a.dateFrom}},displayModeSelected:"表格显示",displayModes:["表格显示","图表显示"],resultShown:!1,ductLineChartShown:!1,ductLineChartExist:!1,tableData:[],tableColNameMap:new k.a,loading:!1}},mounted:function(){this.initEntries()},methods:{initEntries:function(){var e=this;this.$axios.get("height/init_entry").then(function(t){t&&200===t.status&&(console.log(t),e.station_ids=t.data.ids,e.lats=t.data.lats,e.lngs=t.data.lngs,e.locations=t.data.locations,e.idxSelected=0,e.dateSelectReadOnly=!1,e.dateFrom=new Date(t.data.date_from).getTime(),e.dateTo=new Date(t.data.date_to).getTime(),e.dateSelectPlaceHolder="请选择",e.tableColNameMap=t.data.map)})},searchForData:function(){var e=this,t=this,a=!0;if(0!==t.station_ids.length)if(""===t.dateRangeSelected&&(a=!1),a){t.resultShown=!0,t.loading=!0;var s,l="";l="表格显示"===t.displayModeSelected?"height/fetch-height-raw":"height/fetch-height-graph",s={id:t.station_ids[t.idxSelected],date:t.dateRangeSelected},this.clearDrawing(),this.$axios.post(l,s).then(function(a){"表格显示"===t.displayModeSelected?t.tableData=a.data.data:(t.ductLineChartShown=!0,t.ductLineChartExist=!0,e.$nextTick(function(){e.drawDuctChart(a)})),t.loading=!1}).catch(function(a){t.loading=!1,console.log(a),e.$message({showClose:!0,message:"后端出错",type:"error"})})}else this.$message({showClose:!0,message:"条件未输入完全",type:"error"});else this.$message({showClose:!0,message:"后端信息未加载完毕，请重新进入界面",type:"error"})},drawDuctChart:function(e){var t=e.data.types,a=e.data.title,s=e.data.x,l=e.data.series;console.log(l),console.log(t),this.$echarts.init(document.getElementById("ductLineChart")).setOption({title:{text:a,left:"center",top:"5%"},tooltip:{trigger:"axis"},legend:{top:"8%",bottom:"5%",data:t},grid:{height:"60%",left:"3%",right:"4%",top:"17%",containLabel:!0},toolbox:{show:!0,left:"4%",top:"2%",feature:{saveAsImage:{show:!0,excludeComponents:["toolbox"],pixelRatio:2},dataZoom:{show:!0}}},xAxis:{type:"category",boundaryGap:!1,data:s},yAxis:{type:"value"},series:l})},clearDrawing:function(){this.ductLineChartExist&&this.$echarts.init(document.getElementById("ductLineChart")).clear();this.ductLineChartExist=!1}}},T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"wrapper"}},[a("el-container",{staticClass:"container",staticStyle:{height:"100%"}},[a("el-header",{staticClass:"navi_header"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{staticClass:"breadcrumb-wrapper child",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("大气波导")]),e._v(" "),a("el-breadcrumb-item",[e._v("波导展示")])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"title-row"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title-text"},[e._v("历史大气波导数据可视化")])])],1),e._v(" "),a("el-row",{staticClass:"sub-title-row"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"sub-title-text"},[e._v("目前只针对数据缺值较少、探测点位较低的站点进行了波导预计算")])])],1)],1),e._v(" "),a("el-main",[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("站点选择")]),e._v(" "),a("span",{staticClass:"search-text"},[e._v("编号")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择站点编号","no-data-text":"",filterable:"",disabled:"加载中"===e.idxSelected},model:{value:e.idxSelected,callback:function(t){e.idxSelected=t},expression:"idxSelected"}},e._l(e.station_ids,function(e,t){return a("el-option",{key:t,staticStyle:{width:"200px"},attrs:{label:e,value:t}})}),1)],e._v(" "),a("span",{staticClass:"search-text"},[e._v("|")]),e._v(" "),a("span",{staticClass:"search-text"},[e._v("位置")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择地理位置","no-data-text":"",filterable:"",disabled:"加载中"===e.idxSelected},model:{value:e.idxSelected,callback:function(t){e.idxSelected=t},expression:"idxSelected"}},e._l(e.locations,function(e,t){return a("el-option",{key:t,staticStyle:{width:"200px"},attrs:{label:e,value:t}})}),1)],e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("站点编号和地理位置选其一即可")])],2),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("显示方式")]),e._v(" "),a("el-radio-group",{attrs:{size:"medium"},on:{change:function(t){e.resultShown=!1}},model:{value:e.displayModeSelected,callback:function(t){e.displayModeSelected=t},expression:"displayModeSelected"}},e._l(e.displayModes,function(e){return a("el-radio-button",{key:e,attrs:{label:e}})}),1),e._v(" "),a("span",{staticClass:"search-text"},[e._v("日期选择")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","picker-options":e.dateOption,readonly:e.dateSelectReadOnly,disabled:e.dateSelectReadOnly,"default-value":e.dateFrom,"value-format":"timestamp",size:"small","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateRangeSelected,callback:function(t){e.dateRangeSelected=t},expression:"dateRangeSelected"}})],1),e._v(" "),a("div",{staticClass:"search-row"},[a("el-button",{staticClass:"search-btn",attrs:{round:""},on:{click:e.searchForData}},[e._v("搜索并显示")])],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.resultShown,expression:"resultShown"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"display-box"},["表格显示"===e.displayModeSelected?[a("el-table",{staticClass:"result-table",staticStyle:{width:"95%"},attrs:{stripe:"",data:e.tableData}},e._l(e.tableColNameMap,function(t){return a("el-table-column",{key:t.eng,attrs:{label:t.cn,property:t.eng,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row[t.column.property]))])]}}],null,!0)})}),1)]:e._e(),e._v(" "),e.ductLineChartShown?a("div",{staticStyle:{width:"1200px",height:"800px",overflow:"auto",left:"50px"},attrs:{id:"ductLineChart"}}):e._e()],2)])],1)],1)},staticRenderFns:[]};var z=a("VU/8")(F,T,!1,function(e){a("Db7S")},"data-v-774d942c",null).exports,A={name:"LossView",components:{},data:function(){var e=this;return{station_ids:["加载中"],locations:["加载中"],idxSelected:"加载中",lngs:[],lats:[],singleDateSelect:"",dateSelectReadOnly:!0,dateFrom:"",dateTo:"",dateSelectPlaceHolder:"请等待",dateRangeSelected:"",dateOption:{disabledDate:function(t){var a=e;return t>=a.dateTo||t<=a.dateFrom}},modelSelect:"nps",hgt:8,freq:6400,loading:!1,ductLossHeatMapShown:!1,ductLossHeatMapExist:!1,resultShown:!1,dialogVisible:!1,detectionData:{pt:230,G:30,D0:60,Bn:769230,Ls:30,F0:5,sigma:.2},detectionDisplay:[["雷达峰值功率","pt","MHz"],["天线增益","G","dB"],["最小信噪比","D0","MHz"],["接收机带宽","Bn","MHz"],["系统综合损耗","Ls","dB"],["接收机噪声系数","F0","dB"],["目标散射截面","sigma","m*m"]],selfDefineHgt:!1,ductHeight:5}},mounted:function(){this.initEntries()},methods:{initEntries:function(){var e=this;this.$axios.get("height/init_entry").then(function(t){t&&200===t.status&&(console.log(t),e.station_ids=t.data.ids,e.lats=t.data.lats,e.lngs=t.data.lngs,e.locations=t.data.locations,e.idxSelected=0,e.dateSelectReadOnly=!1,e.dateFrom=new Date(t.data.date_from).getTime(),e.dateTo=new Date(t.data.date_to).getTime(),e.dateSelectPlaceHolder="请选择")})},onBtnClicked:function(e){var t=this,a=this;if(""!==a.modelSelect&&""!==a.singleDateSelect||a.selfDefineHgt){var s={id:a.station_ids[a.idxSelected],date:a.singleDateSelect,height_model:a.modelSelect,freq:a.freq,hgt:a.hgt,detection_param:a.detectionData,search_type:e,self_define:a.selfDefineHgt,duct_height:a.ductHeight};a.resultShown=!0,a.loading=!0,this.$axios.post("radar/loss_cal",s).then(function(s){var l=s.data.code;console.log(s),0===l?(t.$notify({title:"计算成功",message:s.data.msg,type:"success"}),a.ductLossHeatMapShown=!0,a.ductLossHeatMapExist=!0,t.$nextTick(function(){t.drawDuctLossHeatMap(s,e)})):-1===l&&t.$notify({title:"结果出错",message:s.data.msg,type:"warning"})}).catch(function(e){console.log(e),t.$notify({title:"无法计算",message:"后端出错",type:"error"})}),a.loading=!1}else this.$notify({title:"条件未输入完全",message:"请填入所有查询条件后重试",type:"warning"})},resetFreq:function(){var e=this.freq;this.freq=e.replace(/[^\d]/g,"").replace(/\./g,""),this.freq=Number(this.freq),this.freq<=0&&(this.freq=1)},resetHgt:function(){var e=this.hgt;this.hgt=e.replace(/[^\.\d]/g,""),this.hgt=Number(this.hgt),this.hgt<=0&&(this.hgt=1)},onDetectionBtnClicked:function(){this.dialogVisible=!this.dialogVisible},doBlindDetection:function(){this.onBtnClicked("blind"),this.dialogVisible=!1},drawDuctLossHeatMap:function(e,t){var a=e.data.data,s=e.data.max_value,l=e.data.min_value,i=e.data.x,n=e.data.y,o=e.data.title,c=this.$echarts.init(document.getElementById("ductLossHeatMap")),r=a.map(function(e){return[e[1],e[0],e[2]||"-"]}),d=[];d="loss"===t?["#0e6cf8","#f8f3a3","#ff0000"]:["#0e6cf8","#f34646","#ff0000"],c.setOption({title:{text:o,left:"center",top:"4%"},tooltip:{position:"top",axisPointer:{type:"shadow"},formatter:function(e){var a=e.data;if("loss"===t)return"高度: "+a[1]+"m<br/>范围: "+a[0]+"km<br/>损耗: "+a[2];var s="是";return 0===a[2]&&(s="否"),"高度: "+a[1]+"m<br/>范围: "+a[0]+"km<br/>是否盲区: "+s}},grid:{height:"50%",top:"10%"},xAxis:{name:"距离(km)",type:"category",data:i,splitArea:{show:!0}},yAxis:{name:"高度(m)",type:"category",data:n,splitArea:{show:!0}},visualMap:{min:l,max:s,calculable:!0,orient:"horizontal",left:"center",bottom:"30%",precision:5,itemWidth:"20",itemHeight:c.getWidth()-400,inRange:{color:d}},series:[{type:"heatmap",data:r,label:{show:!1},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],toolbox:{show:!0,left:"4%",top:"2%",feature:{saveAsImage:{show:!0,excludeComponents:["toolbox"],pixelRatio:2},dataZoom:{show:!0}}}})}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"wrapper"}},[a("el-container",{staticClass:"container",staticStyle:{height:"100%"}},[a("el-header",{staticClass:"navi_header"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{staticClass:"breadcrumb-wrapper child",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("波导模拟")]),e._v(" "),a("el-breadcrumb-item",[e._v("损耗及盲区检测")])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"title-row"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title-text"},[e._v("大气波导传输损耗及盲区检测")])])],1),e._v(" "),a("el-row",{staticClass:"sub-title-row"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"sub-title-text"},[e._v("目前只针对数据缺值较少、探测点位较低的站点进行了波导预计算")])])],1)],1),e._v(" "),a("el-main",[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("站点选择")]),e._v(" "),a("span",{staticClass:"search-text"},[e._v("编号")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择站点编号","no-data-text":"",filterable:"",disabled:"加载中"===e.idxSelected},model:{value:e.idxSelected,callback:function(t){e.idxSelected=t},expression:"idxSelected"}},e._l(e.station_ids,function(e,t){return a("el-option",{key:t,staticStyle:{width:"200px"},attrs:{label:e,value:t}})}),1)],e._v(" "),a("span",{staticClass:"search-text"},[e._v("|")]),e._v(" "),a("span",{staticClass:"search-text"},[e._v("位置")]),e._v(" "),[a("el-select",{attrs:{placeholder:"请选择地理位置","no-data-text":"",filterable:"",disabled:"加载中"===e.idxSelected},model:{value:e.idxSelected,callback:function(t){e.idxSelected=t},expression:"idxSelected"}},e._l(e.locations,function(e,t){return a("el-option",{key:t,staticStyle:{width:"200px"},attrs:{label:e,value:t}})}),1)],e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("站点编号和地理位置选其一即可")])],2),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("波导高度计算模型")]),e._v(" "),[a("el-radio",{attrs:{label:"nps"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("nps")]),e._v(" "),a("el-radio",{attrs:{label:"babin"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("byc")]),e._v(" "),a("el-radio",{attrs:{label:"pj"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("pj")]),e._v(" "),a("el-radio",{attrs:{label:"liuli"},model:{value:e.modelSelect,callback:function(t){e.modelSelect=t},expression:"modelSelect"}},[e._v("mgb")])],e._v(" "),a("span",{staticClass:"search-text"},[e._v("时间选择")]),e._v(" "),a("el-date-picker",{attrs:{type:"date",placeholder:e.dateSelectPlaceHolder,readonly:e.dateSelectReadOnly,disabled:e.dateSelectReadOnly,size:"small","picker-options":e.dateOption,"default-value":e.dateFrom,"value-format":"timestamp"},model:{value:e.singleDateSelect,callback:function(t){e.singleDateSelect=t},expression:"singleDateSelect"}})],2),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("天线高度    ")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入风速"},on:{change:e.resetHgt},model:{value:e.hgt,callback:function(t){e.hgt=t},expression:"hgt"}},[a("template",{slot:"append"},[e._v("m")])],2),e._v(" "),a("span",{staticClass:"search-text",staticStyle:{"margin-left":"60px"}},[e._v("雷达频率    ")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入压强"},on:{change:e.resetFreq},model:{value:e.freq,callback:function(t){e.freq=t},expression:"freq"}},[a("template",{slot:"append"},[e._v("MHz")])],2)],1),e._v(" "),a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("自定义波导高度")]),e._v(" "),a("el-switch",{staticStyle:{"margin-right":"40px"},model:{value:e.selfDefineHgt,callback:function(t){e.selfDefineHgt=t},expression:"selfDefineHgt"}}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入自定义波导高度",disabled:!e.selfDefineHgt},on:{change:e.resetHgt},model:{value:e.ductHeight,callback:function(t){e.ductHeight=t},expression:"ductHeight"}},[a("template",{slot:"append"},[e._v("m")])],2),e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("若使用自定义波导高度，则忽略所选的站点、模型和时间")])],1),e._v(" "),a("div",{staticClass:"search-row"},[a("el-button",{staticClass:"search-btn",attrs:{round:""},on:{click:function(t){return e.onBtnClicked("loss")}}},[e._v("计算损耗")]),e._v(" "),a("el-button",{staticClass:"search-btn",attrs:{round:""},on:{click:e.onDetectionBtnClicked}},[e._v("盲区检测")])],1),e._v(" "),a("el-dialog",{attrs:{title:"盲区监测参数设置",visible:e.dialogVisible,width:"50%",center:""},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._l(e.detectionDisplay,function(t){return a("div",{key:t[1],staticClass:"dialog-search-row"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"search-text",staticStyle:{"font-size":"17px"}},[e._v(e._s(t[0]))])]),e._v(" "),a("el-col",{attrs:{span:4}}),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入内容"},on:{change:e.resetHgt},model:{value:e.detectionData[t[1]],callback:function(a){e.$set(e.detectionData,t[1],a)},expression:"detectionData[item[1]]"}},[a("template",{slot:"append"},[e._v(e._s(t[2]))])],2)],1),e._v(" "),a("el-col",{attrs:{span:4}})],1)],1)}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"search-btn",attrs:{round:""},on:{click:e.doBlindDetection}},[e._v("盲区检测")])],1)],2)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.resultShown,expression:"resultShown"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"display-box"},[e.ductLossHeatMapShown?a("div",{staticStyle:{width:"1200px",height:"800px",overflow:"auto",left:"50px"},attrs:{id:"ductLossHeatMap"}}):e._e()])])],1)],1)},staticRenderFns:[]};var I=a("VU/8")(A,B,!1,function(e){a("cbfH")},"data-v-e0d73e32",null).exports,P={name:"LossP",components:{},data:function(){return{pfa:"",sigma:"",tableData:[]}},mounted:function(){},methods:{onCalBtnClicked:function(){var e=this,t=this,a={pfa:t.pfa,sigma:t.sigma};this.$axios.post("radar/p_detect_cal",a).then(function(a){var s=a.data.code,l=a.data.res;0===s?(e.$notify({title:"计算完成",message:"成功计算得到波导高度为："+l,type:"success"}),t.tableData.unshift(a.data.table_entry)):-1===s&&e.$notify({title:"结果出错",message:a.data.msg,type:"warning"})}).catch(function(a){t.loading=!1,console.log(a),e.$notify({title:"无法计算",message:"后端出错",type:"error"})})}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"wrapper"}},[a("el-container",{staticClass:"container",staticStyle:{height:"100%"}},[a("el-header",{staticClass:"navi_header"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-breadcrumb",{staticClass:"breadcrumb-wrapper child",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("波导模拟")]),e._v(" "),a("el-breadcrumb-item",[e._v("虚警率计算")])],1)],1)],1),e._v(" "),a("el-row",{staticClass:"title-row"},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title-text"},[e._v("大气波导传输损耗相关虚警率计算")])])],1)],1),e._v(" "),a("el-main",[a("div",{staticClass:"search-box"},[a("div",{staticClass:"search-row"},[a("span",{staticClass:"search-text"},[e._v("虚警概率")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入虚警概率"},model:{value:e.pfa,callback:function(t){e.pfa=t},expression:"pfa"}},[a("template",{slot:"append"},[e._v("范围(0,1)")])],2),e._v(" "),a("span",{staticClass:"search-text"},[e._v("横截面积")]),e._v(" "),a("el-input",{attrs:{placeholder:"请输入横截面积"},model:{value:e.sigma,callback:function(t){e.sigma=t},expression:"sigma"}},[a("template",{slot:"append"},[e._v("m * m")])],2)],1),e._v(" "),a("div",{staticClass:"search-row"},[a("el-button",{staticClass:"search-btn",attrs:{round:""},on:{click:e.onCalBtnClicked}},[e._v("计算")]),e._v(" "),a("i",{staticClass:"el-icon-info select-icon"}),e._v(" "),a("span",{staticClass:"hint-text"},[e._v("计算结果不会保存")])],1)]),e._v(" "),a("div",{staticClass:"display-box"},[a("el-row",{staticClass:"title-row",staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"title-text",staticStyle:{"padding-left":"20px"}},[e._v("历史计算结果")])])],1),e._v(" "),[a("el-table",{staticClass:"result-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"date",label:"计算时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pfa",label:"虚警概率"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sigma",label:"横截面积"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pdetect",label:"探测概率"}})],1)]],2)])],1)],1)},staticRenderFns:[]};var U=a("VU/8")(P,q,!1,function(e){a("qscu")},"data-v-06a65411",null).exports,W={name:"Main",components:{},data:function(){return{backgroundImg:a("Didw"),titleImg:a("99RW")}}},j={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"wrapper"},[t("div",{staticClass:"background"},[t("img",{attrs:{src:this.backgroundImg,width:"100%",height:"100%",alt:""}})]),this._v(" "),t("div",{staticClass:"content"},[t("img",{staticClass:"title-img",attrs:{src:this.titleImg,alt:""}})])])])},staticRenderFns:[]};var G=a("VU/8")(W,j,!1,function(e){a("diH7")},"data-v-642b5959",null).exports;s.default.use(d.a);var Z=new d.a({mode:"history",routes:[{path:"/login",name:"Login",component:m},{path:"/home",name:"Home",component:S,redirect:"/index",children:[{path:"/main",name:"Main",component:G},{path:"/index",name:"AppIndex",component:h},{path:"/AnalysisDataView",name:"AnalysisDataView",component:C},{path:"/OriginDataView",name:"OriginDataView",component:L},{path:"/DuctPredictView",name:"DuctPredictView",component:O},{path:"/DuctCalView",name:"DuctCalView",component:V},{path:"/DuctView",name:"DuctView",component:z},{path:"/LossView",name:"LossView",component:I},{path:"/LossP",name:"LossP",component:U}]},{path:"/login",name:"Login",component:m}]});n.a.defaults.baseURL="http://localhost:5000/",s.default.prototype.$axios=n.a,s.default.prototype.$echarts=r,s.default.config.productionTip=!1,s.default.use(c.a),new s.default({el:"#app",router:Z,components:{App:i},template:"<App/>"})},"NKJ+":function(e,t){},Vjdb:function(e,t){},bwxc:function(e,t){},cbfH:function(e,t){},diH7:function(e,t){},lwog:function(e,t){},qscu:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.a720bd4fc9baf092141d.js.map